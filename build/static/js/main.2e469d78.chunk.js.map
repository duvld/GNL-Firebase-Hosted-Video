{"version":3,"sources":["VideoComponent.js","index.js"],"names":["VideoComponent","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","identity","roomName","roomNameErr","previewTracks","localMediaAvailable","hasJoinedRoom","activeRoom","joinRoom","bind","assertThisInitialized","handleRoomNameChange","roomJoined","leaveRoom","detachTracks","detachParticipantTracks","token","setState","console","log","document","getElementById","parentElement","style","visibility","e","target","value","connectOptions","name","tracks","Video","connect","then","error","alert","message","container","forEach","track","appendChild","attach","participant","Array","from","values","attachTracks","detach","detachedElement","remove","room","_this2","getElementsByClassName","previewContainer","refs","localMedia","querySelector","attachParticipantTracks","localParticipant","participants","remoteMedia","on","kind","stop","disconnect","showLocalTrack","react_default","a","createElement","className","ref","joinOrLeaveRoomButton","RaisedButton_default","label","secondary","onClick","primary","Card","TextField_default","id","hintText","onChange","errorText","undefined","Component","injectTapEventPlugin","dom","render","MuiThemeProvider_default","muiTheme","getMuiTheme","darkBaseTheme","AppBar_default","title","VideoComponent_VideoComponent"],"mappings":"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","file":"static/js/main.2e469d78.chunk.js","sourcesContent":["//app/VideoComponent.js\nimport React, { Component } from 'react';\nimport Video from 'twilio-video';\nimport axios from 'axios';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport TextField from 'material-ui/TextField';\nimport { Card, CardHeader, CardText } from 'material-ui/Card';\n\nexport default class VideoComponent extends Component {\n constructor(props) {\n   super();\n   this.state = {\n      identity: null,  /* Will hold the fake name assigned to the client. The name is generated by faker on the server */\n      roomName: '',    /* Will store the room name */\n      roomNameErr: false,  /* Track error for room name TextField. This will    enable us to show an error message when this variable is true */\n      previewTracks: null,\n      localMediaAvailable: false, /* Represents the availability of a LocalAudioTrack(microphone) and a LocalVideoTrack(camera) */\n      hasJoinedRoom: false,\n      activeRoom: null // Track the current active room\n   };\n\n   this.joinRoom = this.joinRoom.bind(this);\n   this.handleRoomNameChange = this.handleRoomNameChange.bind(this);\n   this.roomJoined = this.roomJoined.bind(this);\n   this.leaveRoom = this.leaveRoom.bind(this);\n   this.detachTracks = this.detachTracks.bind(this);\n   this.detachParticipantTracks =this.detachParticipantTracks.bind(this);\n\n\n }\n\n componentDidMount() {\n\t//   axios.get('/token').then(results => {\n\t//     /*\n\t// Make an API call to get the token and identity(fake name) and  update the corresponding state variables.\n\t//     */\n\t//     const { identity, token } = {\"identity\":\"Ms. Ramon Lakin\",\"token\":\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCIsImN0eSI6InR3aWxpby1mcGE7dj0xIn0.eyJqdGkiOiJTSzg0OGNkZTAzNDlmYTRlZTc1ZmE0Njk4ZTE4NTUxYTQyLTE1NTA4MDUxMTAiLCJncmFudHMiOnsiaWRlbnRpdHkiOiJNcy4gUmFtb24gTGFraW4iLCJ2aWRlbyI6e319LCJpYXQiOjE1NTA4MDUxMTAsImV4cCI6MTU1MDgwODcxMCwiaXNzIjoiU0s4NDhjZGUwMzQ5ZmE0ZWU3NWZhNDY5OGUxODU1MWE0MiIsInN1YiI6IkFDYWE3ZTNjZmNjNDAzMjdlZGJkM2Q3OWEwY2VkOGJjNzEifQ.SJwQAgUlOjaLrQaqMUsvROpeIdg1bnhEwFN6FjDCzxk\"}\n\t//     this.setState({ identity, token });\n\t//   });\n\t// console.log('updated2');\n\n\t// axios.post('https://aqua-tapir-3674.twil.io/video-token').then(results => { \n\t// \tconsole.log('results: ' + results);   \n\t//     const { identity, token } = results.data;\n\t//     this.setState({ identity, token });\n\t//     console.log(\"id: \" + identity + \" token: \" + token);\n\t// });\n\n\t// axios.get('https://aqua-tapir-3674.twil.io/video-token').then(function (response) {\n\t// \tconsole.log(response);\n\t// }).catch(function (error) {\n\t// \t\tconsole.log(error);\n\t// });\n\n\t\tconst {identity, token} = {\"identity\":\"Jerrold Armstrong\",\"token\":\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCIsImN0eSI6InR3aWxpby1mcGE7dj0xIn0.eyJqdGkiOiJTSzY1ODQ0MzgxYzAwMjUwYmIxZWE4NmU0M2M3ZjRmNzg5LTE1NjY1MDUyNTUiLCJncmFudHMiOnsiaWRlbnRpdHkiOiJKZXJyb2xkIEFybXN0cm9uZyIsInZpZGVvIjp7fX0sImlhdCI6MTU2NjUwNTI1NSwiZXhwIjoxNTY2NTA4ODU1LCJpc3MiOiJTSzY1ODQ0MzgxYzAwMjUwYmIxZWE4NmU0M2M3ZjRmNzg5Iiwic3ViIjoiQUM1OGZiYzllZjRiZTMzNTMwMmY2ODk0MzUxN2ExY2UxMSJ9.OyRQw9al4zjOa7pL4F5-cHVCeM7Wq2v_GAG3NvGL8oc\"};\n\t\tthis.setState({identity, token});\n\t\tconsole.log(\"id: \" + identity + \" token: \" + token);\n\n\t\tdocument.getElementById(\"roomname\").parentElement.style.visibility = 'hidden';\n\t\t\n\t\t//document.getElementsByClassName(\"flex-item\")\n\n\t// axios.get('https://aqua-tapir-3674.twil.io/video-token')\n\t// \t.then(\n\t// \t\tfunction (response) {\n\t// \t\t\tconsole.log(response.data.token);\n\n\t// \t\t\tthis.setState({ token: response.data.token });\n\n\t// \t\t}.bind(this)\n\t// \t);\n\t\t\n\t}\n\n\n\thandleRoomNameChange(e) {\n  /* Fetch room name from text field and update state */\n      let roomName = e.target.value; \n      this.setState({ roomName });\n    }\n\n    joinRoom() {\n   /* \n\tShow an error message on room name text field if user tries         joining a room without providing a room name. This is enabled by setting `roomNameErr` to true\n\t  */\n        // if (!this.state.roomName.trim()) {\n        //     this.setState({ roomNameErr: true });\n        //     return;\n        // }\n\n        console.log(\"Joining room '\" + this.state.roomName + \"'...\");\n        let connectOptions = {\n            name: \"bryan\"\n        };\n\n        if (this.state.previewTracks) {\n            connectOptions.tracks = this.state.previewTracks;\n        }\n\n        /* \n\t\tConnect to a room by providing the token and connection    options that include the room name and tracks. We also show an alert if an error occurs while connecting to the room.    \n\t\t*/  \n\t\tVideo.connect(this.state.token, connectOptions).then(this.roomJoined, error => {\n\t\t  alert('Could not connect to Twilio: ' + error.message);\n\t\t});\n\t}\t\n\n\t// Attach the Tracks to the DOM.\n\tattachTracks(tracks, container) {\n\t  tracks.forEach(track => {\n\t    container.appendChild(track.attach());\n\t  });\n\t}\n\n\t// Attach the Participant's Tracks to the DOM.\n\tattachParticipantTracks(participant, container) {\n\t  var tracks = Array.from(participant.tracks.values());\n\t  this.attachTracks(tracks, container);\n\t}\n\n\tdetachTracks(tracks) {\n\t    tracks.forEach(track => {\n\t      track.detach().forEach(detachedElement => {\n\t        detachedElement.remove();\n\t      });\n\t    });\n\t  }\n\n\tdetachParticipantTracks(participant) {\n\t  var tracks = Array.from(participant.tracks.values());\n\t  this.detachTracks(tracks);\n\t}\n\n\troomJoined(room) {\n\t  // Called when a participant joins a room\n\t  console.log(\"Joined as '\" + this.state.identity + \"'\");\n\t  this.setState({\n\t    activeRoom: room,\n\t    localMediaAvailable: true,\n\t    hasJoinedRoom: true  // Removes ‘Join Room’ button and shows ‘Leave Room’\n\t  });\n\n\t  document.getElementById(\"flex-container2\").appendChild(document.getElementsByClassName(\"flex-item\")[0]);\n\n\t  // Attach LocalParticipant's tracks to the DOM, if not already attached.\n\t  var previewContainer = this.refs.localMedia;\n\t  if (!previewContainer.querySelector('video')) {\n\t    this.attachParticipantTracks(room.localParticipant, previewContainer);\n\t  }\n\n\t  // Attach the Tracks of the room's participants.\n    room.participants.forEach(participant => {\n      console.log(\"Already in Room: '\" + participant.identity + \"'\");\n      var previewContainer = this.refs.remoteMedia;\n      this.attachParticipantTracks(participant, previewContainer);\n    });\n\n    // Participant joining room\n    room.on('participantConnected', participant => {\n      console.log(\"Joining: '\" + participant.identity + \"'\");\n    });\n\n    // Attach participant’s tracks to DOM when they add a track\n    room.on('trackAdded', (track, participant) => {\n      console.log(participant.identity + ' added track: ' + track.kind);\n      var previewContainer = this.refs.remoteMedia;\n      this.attachTracks([track], previewContainer);\n    });\n\n    // Detach participant’s track from DOM when they remove a track.\n    room.on('trackRemoved', (track, participant) => {\n      this.log(participant.identity + ' removed track: ' + track.kind);\n      this.detachTracks([track]);\n    });\n\n    // Detach all participant’s track when they leave a room.\n    room.on('participantDisconnected', participant => {\n      console.log(\"Participant '\" + participant.identity + \"' left the room\");\n      this.detachParticipantTracks(participant);\n    });\n\n    // Once the local participant leaves the room, detach the Tracks\n    // of all other participants, including that of the LocalParticipant.\n    room.on('disconnected', () => {\n      if (this.state.previewTracks) {\n        this.state.previewTracks.forEach(track => {\n          track.stop();\n        });\n      }\n      this.detachParticipantTracks(room.localParticipant);\n      room.participants.forEach(this.detachParticipantTracks);\n      this.state.activeRoom = null;\n      this.setState({ hasJoinedRoom: false, localMediaAvailable: false });\n    });  \n\t    // ... more event listeners\n\t}\n\tleaveRoom() {\n   \t\tthis.state.activeRoom.disconnect();\n   \t\tthis.setState({ hasJoinedRoom: false, localMediaAvailable: false });\n\t}\n\n\trender() {\n\t  /* \n\t   Controls showing of the local track\n\t   Only show video track after user has joined a room else show nothing \n\t  */\n\t  let showLocalTrack = this.state.localMediaAvailable ? (\n\t    <div className=\"flex-item\"><div ref=\"localMedia\" /> </div>) : '';   \n\t  /*\n\t   Controls showing of ‘Join Room’ or ‘Leave Room’ button.  \n\t   Hide 'Join Room' button if user has already joined a room otherwise \n\t   show `Leave Room` button.\n\t  */\n\t  let joinOrLeaveRoomButton = this.state.hasJoinedRoom ? (\n\t  <RaisedButton label=\"End Session\" secondary={true} onClick={this.leaveRoom}  />) : (\n\t  <RaisedButton label=\"Start Session\" primary={true} onClick={this.joinRoom} />);\n\t  return (\n\t    <Card>\n\t    <CardText>\n\t      <div className=\"flex-container\">\n\t    {showLocalTrack} {/* Show local track if available */}\n\t    <div className=\"flex-item\">\n\t    {/* \n\tThe following text field is used to enter a room name. It calls  `handleRoomNameChange` method when the text changes which sets the `roomName` variable initialized in the state.\n\t    */}\n\t    <TextField id=\"roomname\" value=\"bryan\" hintText=\"Room Name\" onChange={this.handleRoomNameChange} \n\terrorText = {this.state.roomNameErr ? 'Room Name is required' : undefined} \n\t     /><br />\n\t    {joinOrLeaveRoomButton}  {/* Show either ‘Leave Room’ or ‘Join Room’ button */}\n\t     </div>\n\t    {/* \n\tThe following div element shows all remote media (other                             participant’s tracks) \n\t    */}\n\t    <div className=\"flex-item\" ref=\"remoteMedia\" id=\"remote-media\" />\n\t  \t<div id=\"flex-container2\"/>\n\t  </div>\n\t</CardText>\n\t    </Card>\n\t  );\n\t}\n}","// import React from 'react';\n// import ReactDOM from 'react-dom';\n// import './index.css';\n// import App from './App';\n// import * as serviceWorker from './serviceWorker';\n\n// ReactDOM.render(<App />, document.getElementById('root'));\n\n// // If you want your app to work offline and load faster, you can change\n// // unregister() to register() below. Note this comes with some pitfalls.\n// // Learn more about service workers: http://bit.ly/CRA-PWA\n// serviceWorker.unregister();\nimport React, { Component } from \"react\";\nimport AppBar from 'material-ui/AppBar';\nimport { render } from \"react-dom\";\nimport \"./index.css\";\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider'\nimport darkBaseTheme from 'material-ui/styles/baseThemes/darkBaseTheme';\nimport getMuiTheme from 'material-ui/styles/getMuiTheme';\nimport VideoComponent from './VideoComponent';\nimport injectTapEventPlugin from \"react-tap-event-plugin\";\ninjectTapEventPlugin();\n\nlet dom = document.getElementById(\"app\");\nrender(\n    <MuiThemeProvider muiTheme={getMuiTheme(darkBaseTheme)}>\n            <div>\n            <AppBar title=\"React Twilio Video\" />\n            <VideoComponent />\n            </div>\n    </MuiThemeProvider>\n    ,\n    dom\n);"],"sourceRoot":""}